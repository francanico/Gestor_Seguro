{% extends "base.html" %}

{% block content %}
    <h2>{{ titulo_pagina|default:"Formulario de Póliza" }}</h2>
    <hr>
    
    <h3>--- INICIO DE DEPURACIÓN ---</h3>

    <h4>1. ¿Existe la variable 'form'?</h4>
    {% if form %}
        <p style="color: green; font-weight: bold;">Sí, la variable 'form' existe.</p>
    {% else %}
        <p style="color: red; font-weight: bold;">No, la variable 'form' NO existe o está vacía.</p>
    {% endif %}

    <hr>

    <h4>2. Renderizado simple con 'as_p':</h4>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        
        {{ form.as_p }}

        <hr>
        
        <h4>3. Renderizado del formset (si existe):</h4>
        {% if formset %}
            <p style="color: green;">La variable 'formset' existe.</p>
            {{ formset.management_form }}
            {% for f in formset %}
                {{ f.as_p }}
                <hr>
            {% endfor %}
        {% else %}
            <p style="color: orange;">La variable 'formset' no existe.</p>
        {% endif %}
        
        <button type="submit">Guardar</button>
    </form>
    
    <hr>
    <h3>--- FIN DE DEPURACIÓN ---</h3>

{% endblock %}